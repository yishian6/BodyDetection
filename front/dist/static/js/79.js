webpackJsonp([79],{"0Abf":function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,'\n@charset "UTF-8";\n.app[data-v-469346a8] {\n  height: 84vh;\n  color: #000000;\n  margin: 0 auto;\n  width: 96%;\n  background-color: #fff;\n  border-radius: 8px;\n}\n.app .title[data-v-469346a8] {\n    font-size: 32px;\n    text-align: center;\n    font-weight: bold;\n    color: #333;\n    padding: 1.5% 0;\n}\n.app .subtitle[data-v-469346a8] {\n    font-size: 16px;\n    text-align: center;\n    color: #666;\n    margin-bottom: 30px;\n}\n.app .unitForm[data-v-469346a8] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: distribute;\n        justify-content: space-around;\n}\n.app .content[data-v-469346a8] {\n    height: 66%;\n    width: 96%;\n    margin: 0 auto;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -ms-flex-pack: distribute;\n        justify-content: space-around;\n}\n.app .content .left[data-v-469346a8] {\n      width: 48%;\n      height: 100%;\n      background-color: #eae9e9;\n      border-radius: 8px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      /* 水平居中 */\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      /* 垂直居中 */\n}\n.app .content .left .upload[data-v-469346a8] {\n        margin-left: 16%;\n        color: black;\n}\n.app .content .left .srcImg[data-v-469346a8] {\n        width: 94%;\n        /* 图片最大宽度不超过容器宽度 */\n        height: auto;\n        /* 高度自适应 */\n        margin: 0 auto;\n}\n.app .content .left .image-container[data-v-469346a8] {\n        position: relative;\n        display: inline-block;\n}\n.app .content .left .uploaded-image[data-v-469346a8] {\n        max-width: 90%;\n        height: auto;\n        display: block;\n        margin: 0 auto;\n        border-radius: 6px;\n}\n.app .content .left .image-actions[data-v-469346a8] {\n        position: absolute;\n        bottom: 2.2%;\n        right: 1.0%;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n}\n.app .content .left .action-item[data-v-469346a8] {\n        cursor: pointer;\n        margin-left: 10px;\n        background-color: rgba(0, 0, 0, 0.5);\n        color: white;\n        padding: 5px;\n        border-radius: 5px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n}\n.app .content .left .action-item[data-v-469346a8]:hover {\n        background-color: rgba(253, 0, 0, 0.7);\n}\n.app .content .right[data-v-469346a8] {\n      width: 48%;\n      height: 100%;\n      background-color: #eae9e9;\n      border-radius: 8px;\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      /* 水平居中 */\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      /* 垂直居中 */\n}\n.app .content .right .image-container[data-v-469346a8] {\n        position: relative;\n        display: inline-block;\n}\n.app .content .right .uploaded-image[data-v-469346a8] {\n        max-width: 90%;\n        height: auto;\n        display: block;\n        margin: 0 auto;\n        border-radius: 6px;\n}\n.app .content .right .image-actions[data-v-469346a8] {\n        position: absolute;\n        bottom: 2.2%;\n        right: 2.2%;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n}\n.app .content .right .action-item[data-v-469346a8] {\n        cursor: pointer;\n        margin-left: 10px;\n        background-color: rgba(0, 0, 0, 0.5);\n        color: white;\n        padding: 5px;\n        border-radius: 5px;\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n}\n.app .content .right .action-item[data-v-469346a8]:hover {\n        background-color: rgba(0, 253, 59, 0.7);\n}\n',""])},AQzn:function(e,t,n){var a=n("0Abf");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("36fc5af3",a,!0)},YZql:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("//Fk"),i=n.n(a),o=n("Xxa5"),s=n.n(o),r=n("exGp"),l=n.n(r),c={name:"fileConvert",data:function(){return{form:{method:""},methodOptions:[{label:"yolo预训练模型",value:"yolo预训练模型"},{label:"热成像预训练模型",value:"热成像预训练模型"},{label:"红外预训练模型",value:"红外预训练模型"},{label:"融合预训练模型",value:"融合预训练模型"}],isUploaded:!1,srcVideoUrl:"",desVideoUrl:"",videoId:"",taskId:"",fileList:[],showDelActions:!1,showDownActions:!1,isDehaze:!1,process_time:0}},methods:{identify:function(){var e=this;return l()(s.a.mark(function t(){var n,a;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.form.method){t.next=3;break}return e.$message.error("请先选择模型！"),t.abrupt("return");case 3:if(""!=e.videoId){t.next=6;break}return e.$message.error("请先上传视频！"),t.abrupt("return");case 6:return e.isDehaze=!1,t.next=9,e.$http.post(e.baseurl+"/detect/videos",{video_id:e.videoId,method:e.form.method});case 9:if(200!==(n=t.sent).status){t.next=22;break}return e.$message.success("开始识别，请等待！"),e.taskId=n.data.task_id,t.next=15,e.checkTaskStatus();case 15:a=t.sent,e.desVideoUrl=e.baseurl+a.file_path,console.log(e.desVideoUrl),e.process_time=a.process_time.toFixed(4),e.isDehaze=!0,t.next=23;break;case 22:e.$message.error("上传并去雾失败！");case 23:case"end":return t.stop()}},t,e)}))()},checkTaskStatus:function(){var e=this;return l()(s.a.mark(function t(){var n,a,o,r,l;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=10,a=5e3,o=0;case 3:if(!(o<n)){t.next=27;break}return t.prev=4,t.next=7,e.$http.get(e.baseurl+"/task/status/"+e.taskId);case 7:if(r=t.sent,"failed"!==(l=r.data.status)){t.next=11;break}throw new Error("任务失败");case 11:if("completed"!==l){t.next=15;break}return console.log("任务已完成"),console.log("任务结果:",r.data.result),t.abrupt("return",r.data.result);case 15:return console.log("任务状态: "+l+","+a/1e3+"秒后再次检查..."),t.next=18,new i.a(function(e){return setTimeout(e,a)});case 18:t.next=24;break;case 20:throw t.prev=20,t.t0=t.catch(4),console.error("检查任务状态时发生错误:",t.t0),t.t0;case 24:o++,t.next=3;break;case 27:throw new Error("任务检查超时，未能完成");case 28:case"end":return t.stop()}},t,e,[[4,20]])}))()},handleSuccess:function(e,t){this.isUploaded=!0,this.fileList=[t],this.videoId=e.video_id,this.srcVideoUrl=this.baseurl+e.file_path},handleRemove:function(e){this.fileList=[],this.isUploaded=!1}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("div",{staticClass:"title"},[e._v("视频人体识别")]),e._v(" "),n("div",{staticClass:"subtitle"},[e._v("提供多种 YOLO 模型，实现高效精准的人体识别，提升视频分析的多样性与准确性")]),e._v(" "),n("el-form",{ref:"form",staticClass:"unitForm",attrs:{model:e.form,id:"form"}},[n("el-form-item",{attrs:{label:"识别模型:"}},[n("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}},e._l(e.methodOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-view"},on:{click:e.identify}},[e._v("识别")])],1)],1),e._v(" "),n("div",{staticClass:"content"},[n("div",{staticClass:"left"},[e.isUploaded?n("div",{staticClass:"image-container",on:{mouseenter:function(t){e.showDelActions=!0},mouseleave:function(t){e.showDelActions=!1}}},[n("video",{staticClass:"uploaded-image",attrs:{controls:"",autoplay:""}},[n("source",{attrs:{src:e.srcVideoUrl,type:"video/mp4"}}),e._v("\n                    Download the\n                    "),n("a",{attrs:{href:e.srcVideoUrl}},[e._v("MP4")]),e._v("\n                    video.\n                ")]),e._v(" "),e.showDelActions?n("div",{staticClass:"image-actions"},[n("span",{staticClass:"action-item",on:{click:e.handleRemove}},[n("i",{staticClass:"el-icon-delete"})])]):e._e()]):n("el-upload",{staticClass:"upload",attrs:{drag:"",action:e.baseurl+"/upload/video","auto-upload":!0,accept:".mp4, .avi, .mov","file-list":e.fileList,limit:1,"on-success":e.handleSuccess}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传mp4/avi/mov文件")])])],1),e._v(" "),n("div",{staticClass:"right"},[e.isDehaze?n("div",{staticClass:"image-container",on:{mouseenter:function(t){e.showDownActions=!0},mouseleave:function(t){e.showDownActions=!1}}},[n("video",{staticClass:"uploaded-image",attrs:{controls:"",autoplay:""}},[n("source",{attrs:{src:e.desVideoUrl,type:"video/mp4"}})]),e._v(" "),e.showDownActions?n("div",{staticClass:"image-actions"},[n("span",{staticClass:"action-item"},[n("i",{staticClass:"el-icon-download"})])]):e._e()]):n("el-empty",{staticStyle:{margin:"0 auto"}})],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isDehaze,expression:"isDehaze"}],staticStyle:{display:"flex","justify-content":"right","margin-right":"4%","margin-top":"1%"}},[e._v("识别耗时："+e._s(e.process_time)+" ms")])],1)},staticRenderFns:[]};var p=n("VU/8")(c,d,!1,function(e){n("AQzn")},"data-v-469346a8",null);t.default=p.exports}});