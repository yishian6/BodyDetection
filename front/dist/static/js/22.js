webpackJsonp([22],{"5PlU":function(e,t,a){var s=a("RY/4"),r=a("dSzd")("iterator"),i=a("/bQp");e.exports=a("FeBl").isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||i.hasOwnProperty(s(t))}},Xd32:function(e,t,a){a("+tPU"),a("zQR9"),e.exports=a("5PlU")},awaG:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.unitForm[data-v-0137c8dc] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n}\n.unitForm .el-form-item[data-v-0137c8dc] {\n    width: 24%;\n}\n.unitForm .el-form-item .el-form-item__label[data-v-0137c8dc] {\n      width: 40%;\n}\n.unitForm .el-form-item .el-form-item__content[data-v-0137c8dc] {\n      margin-left: 10px !important;\n}\n.unitForm .el-form-item .el-form-item__content .el-date-editor[data-v-0137c8dc] {\n        width: 100%;\n}\n.unitForm .el-form-item .el-form-item__content .el-date-editor .el-input__icon[data-v-0137c8dc] {\n          color: #15a193;\n}\n.table[data-v-0137c8dc] {\n  width: 96%;\n  margin-left: 2%;\n}\n.table .delete-icon[data-v-0137c8dc] {\n    color: #f78989;\n    visibility: hidden;\n}\n.table tbody tr:hover .delete-icon[data-v-0137c8dc] {\n    visibility: visible;\n    cursor: pointer;\n}\n.gdzsDiv[data-v-0137c8dc] {\n  position: absolute;\n  top: 10%;\n  left: 8%;\n  width: 80%;\n  height: 80%;\n}\n.gdzsDiv .chartTitle[data-v-0137c8dc] {\n    position: absolute;\n    top: 2%;\n    left: 6%;\n    width: 100%;\n    height: 20%;\n    color: #00bbee;\n    font-size: 16px;\n    font-weight: bold;\n}\n.gdzsDiv .gdzsChart[data-v-0137c8dc] {\n    position: absolute;\n    top: 5%;\n    left: 6%;\n    width: 90%;\n    height: 90%;\n}\n",""])},d7EF:function(e,t,a){"use strict";t.__esModule=!0;var s=i(a("us/S")),r=i(a("BO1k"));function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e,t){if(Array.isArray(e))return e;if((0,s.default)(Object(e)))return function(e,t){var a=[],s=!0,i=!1,n=void 0;try{for(var o,l=(0,r.default)(e);!(s=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);s=!0);}catch(e){i=!0,n=e}finally{try{!s&&l.return&&l.return()}finally{if(i)throw n}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},gHP8:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),r=a.n(s),i=a("d7EF"),n=a.n(i),o=a("t4zo"),l={components:{},data:function(){return{form:{method:"",start:"",end:""},searchTableData:[],TableHeight:0,tableRadio:{},currentPage:1,pagesize:10,pagesizes:[5,10,20,50,100],total:0,isopenDialog:"false",title:"",selected:"",isRegress:!0,loading:!1,regressData:{},hovered:!1,methodOptions:[{value:"线性回归",label:"线性回归"},{value:"多元线性回归",label:"多元线性回归"},{value:"随机森林回归",label:"随机森林回归"},{value:"弹性网络回归",label:"弹性网络回归"},{value:"支持向量机回归",label:"支持向量机回归"},{value:"长短期记忆网络",label:"长短期记忆网络"}]}},computed:{},watch:{},methods:{getData:function(){var e=this;this.$http({url:this.baseurl+"/sales/index",method:"get",data:{}}).then(function(t){var a=t.data.data;e.searchTableData=a,e.total=e.searchTableData.length})},onSearch:function(){var e=this,t=this.form.start.split("/"),a=n()(t,2),s=a[0],i=a[1],o=this.form.end.split("/"),l=n()(o,2),c=l[0],d=l[1];if(""==this.form.method||""==this.form.start||""==this.form.end)this.$message({message:"预测方法不能为空",type:"error"});else if(c<s||c==s&&d<i)this.$message({message:"日期输入错误，请重新输入！！！",type:"error"});else{this.loading=!0;var h=r()({},this.form);this.$http.post(this.baseurl+"/sales/regress",h).then(function(t){var a=t.data.data;e.tableData=a.regress_record,e.searchTableData=a.regress_record,e.total=e.searchTableData.length,e.regressData=a.regress_result,console.log(e.regressData)}),this.isRegress=!1,setTimeout(function(){e.loading=!1,e.initGdzsChart()},2e3),this.$message({message:"预测成功",type:"success"})}},queryRecord:function(e){var t=this;this.regressData=e.regress_data,this.isRegress=!1,setTimeout(function(){t.initGdzsChart()},50)},handleDelete:function(e){var t=this;this.$http.post(this.baseurl+"/sales/delete",{delId:e.id,filename:e.operate}).then(function(a){if(200==a.data.code){t.$message({message:"删除成功",type:"success"});var s=t.searchTableData.findIndex(function(t){return t.id===e.id});-1!==s&&t.searchTableData.splice(s,1)}else t.$message({message:"删除失败",type:"error"})}).catch(function(e){return console.log(e)})},restore:function(){this.isRegress=!0},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},getIndexUrl:function(){var e=window.location.search;void 0===e||null==e||""==e||(this.selected=e.split("=")[1])},fixMap:function(){this.$router.push({name:"销售量预测"})},initGdzsChart:function(){var e=this.regressData.time,t=this.regressData.result;console.log(e,t);var a={tooltip:{trigger:"axis",axisPointer:{lineStyle:{color:"#fff"}}},legend:{right:"3%",textStyle:{fontSize:14,color:"#fff"}},xAxis:[{type:"category",axisLine:{lineStyle:{color:"rgba(255,255,255,.5)"}},splitLine:{show:!1},axisTick:{show:!1},splitArea:{show:!1},axisLabel:{interval:0,color:"rgba(255,255,255,0.7)",fontSize:12},data:e}],yAxis:[{type:"value",scale:!0,min:0,max:14e4,interval:2e4,splitLine:{show:!0,lineStyle:{type:"dashed",color:"RGBA(3, 75, 97, 1)"}},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0,color:"rgba(255,255,255,0.5)",fontSize:12},splitArea:{show:!1}}],series:[{name:"销量",type:"line",smooth:!0,symbol:"circle",symbolSize:5,showSymbol:!1,zlevel:1,z:1,lineStyle:{normal:{width:1}},areaStyle:{normal:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(0, 136, 212, 0.3)"},{offset:.8,color:"rgba(0, 136, 212, 0)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10}},itemStyle:{normal:{color:"rgb(0,136,212)",borderColor:"rgba(0,136,212,0.2)",borderWidth:12}},data:t}]},s=this.$echarts.init(this.$refs.gdzsChart);s.setOption(a),window.addEventListener("resize",function(){s.resize()})},downloadExcel:function(){var e=this,t=this.form.start.split("/"),a=n()(t,2),s=a[0],r=a[1],i=this.form.end.split("/"),l=n()(i,2),c=l[0],d=l[1];if(""==this.form.method||""==this.form.start||""==this.form.end)this.$message({message:"预测方法不能为空",type:"error"});else if(c<s||c==s&&d<r)this.$message({message:"日期输入错误，请重新输入！！！",type:"error"});else{this.form.start=this.form.start.replace("/","-"),this.form.end=this.form.end.replace("/","-");var h=this.form.method+"预测"+this.form.start+"~"+this.form.end+".xlsx";this.$http({url:this.baseurl+"/sales/download",method:"POST",responseType:"blob",data:{method:this.form.method,start:this.form.start,end:this.form.end}}).then(function(t){if(console.log(t.data),t.data.size>40){var a=new Blob([t.data]);Object(o.saveAs)(a,h),e.$message({message:"文件下载成功！！！",type:"success"})}else e.$message({message:"文件下载失败！！！",type:"error"})}).catch(function(t){e.$message({message:"文件下载失败！！！",type:"error"}),console.error("下载excel文件出错:",t)})}}},created:function(){this.getData()},mounted:function(){var e=this,t=document.documentElement.clientHeight||document.bodyclientHeight;this.getIndexUrl(),this.$nextTick(function(){e.TableHeight=t-e.$refs.formDiv.offsetHeight-170})},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{ref:"formDiv"},[a("el-form",{ref:"form",staticClass:"unitForm",attrs:{model:e.form,id:"form"}},[a("el-form-item",{attrs:{label:"预测方式:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}},e._l(e.methodOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"开始时间:"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy/MM",placeholder:"请选择"},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间:"}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy/MM",placeholder:"请选择"},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.onSearch}},[e._v("预测")]),e._v(" "),a("el-button",{staticClass:"iconfont icon-xiazai",attrs:{type:"primary",size:"small"},on:{click:e.downloadExcel}},[e._v("下载")]),e._v(" "),a("el-button",{staticClass:"iconfont icon-huifu",attrs:{type:"primary",size:"small"},on:{click:function(t){e.restore()}}},[e._v(" 返回")])],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.isRegress,expression:"isRegress"}],ref:"table",staticClass:"table",attrs:{data:e.searchTableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),id:"table",stripe:"","header-row-style":{height:"35px"},"row-style":{height:"35px"},height:e.TableHeight},on:{"row-click":e.queryRecord}},[a("el-table-column",{attrs:{type:"selection",label:"",align:"center","min-width":"8%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"id",label:"序号",align:"center","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"operate",label:"操作",align:"center","min-width":"20%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",align:"right","min-width":"10%"}}),e._v(" "),a("el-table-column",{attrs:{align:"right","min-width":"5%"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-delete delete-icon",on:{click:function(a){a.stopPropagation(),e.handleDelete(t.row)}}}),e._v("\n              \n      ")]}}])})],1),e._v(" "),a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.isRegress,expression:"isRegress"}],attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pagesizes,"page-size":e.pagesize,layout:" prev, pager, next, jumper, sizes,total",total:e.searchTableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"gdzsDiv",attrs:{"element-loading-text":"正在预测中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isRegress,expression:"!isRegress"}],staticClass:"gdzsDiv"},[a("div",{staticClass:"chartTitle"},[e._v("一汽销量预测")]),e._v(" "),a("div",{ref:"gdzsChart",staticClass:"gdzsChart"})])],1)},staticRenderFns:[]};var d=a("VU/8")(l,c,!1,function(e){a("l1QJ")},"data-v-0137c8dc",null);t.default=d.exports},l1QJ:function(e,t,a){var s=a("awaG");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a("rjj0")("09853c5e",s,!0)},"us/S":function(e,t,a){e.exports={default:a("Xd32"),__esModule:!0}}});