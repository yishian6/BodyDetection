webpackJsonp([36],{"/mUl":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"",""])},"3WhY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),r={name:"unitManagement",components:{},props:["title","width"],data:function(){return{open:!1,form:{roleName:"",phone:""},tableData:[],searchTableData:[],TableHeight:"40vh",tableRadio:"",currentPage:1,pagesize:10,pagesizes:[2,5,10,20,50,100],total:0,roleId:"",muticalSelectData:[]}},created:function(){var e=this;document.onkeydown=function(t){13==window.event.keyCode&&e.onSearch()}},mounted:function(){},methods:{init:function(e){var t=this;this.open=!0;var a=this;this.$nextTick(function(){a.$refs.form.resetFields(),e&&(t.roleId=e,t.getData())})},clickChange:function(e){this.tableRadio=e},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},getData:function(){var e=this,t={loginName:this.form.roleName,phonenumber:this.form.phone,roleId:this.roleId,orderByColumn:"createTime",isAsc:"desc"};this.$http({url:this.$http.adornUrl("/system/role/authUser/unallocatedList"),method:"post",params:this.$http.adornParams(t)}).then(function(t){if(0==t.data.code){var a=t.data.rows;e.searchTableData=a,e.total=a.length}})},onSearch:function(){this.getData()},resetForm:function(e){this.$refs[e].resetFields()},cancel:function(){this.open=!1,this.$parent.openDialog=!1,this.$parent.getData()},submitForm:function(e){var t=this;if(e.length>0){var a=[],n=!0,r=!1,l=void 0;try{for(var o,s=i()(e);!(n=(o=s.next()).done);n=!0){var c=o.value;a.push(c.userId)}}catch(e){r=!0,l=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw l}}var p=this,u={roleId:this.roleId,userIds:a.join(",")};this.$http({url:this.$http.adornUrl("/system/role/authUser/selectAll"),method:"post",params:this.$http.adornParams(u)}).then(function(e){0==e.data.code&&(t.$message({message:e.data.msg,type:"success"}),setTimeout(function(){p.open=!1,p.$parent.openDialog=!1,p.$parent.getData()},1e3))})}},handleSelectionChange:function(e){this.muticalSelectData=e}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialogDiv"},[a("el-dialog",{staticClass:"dialog",attrs:{title:e.title,visible:e.open,width:e.width,"close-on-click-modal":!1,"append-to-body":"","lock-scroll":!1},on:{"update:visible":function(t){e.open=t},"destroy-on-close":!0}},[a("div",{staticClass:"userContainer"},[a("div",{staticClass:"recipientsApply"},[a("div",{ref:"formDiv"},[a("el-form",{ref:"form",staticClass:"unitForm",attrs:{model:e.form,id:"form"}},[a("el-form-item",{attrs:{label:"登录名称:",prop:"roleName"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.roleName,callback:function(t){e.$set(e.form,"roleName",t)},expression:"form.roleName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码:",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:e.onSearch}},[e._v("查询\n                            ")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh-right",size:"small"},on:{click:function(t){e.resetForm("form")}}},[e._v("重置\n                            ")])],1)],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchTableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),id:"table",stripe:"","header-row-style":{height:"35px"},"row-style":{height:"35px"},height:e.TableHeight},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center","min-width":"4%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"loginName",label:"登录名称","class-name":"menuName",align:"center","min-width":"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名称",align:"center","min-width":"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center","min-width":"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phonenumber",label:"手机",sortable:"",align:"center","min-width":"14%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"用户状态",align:"center","min-width":"12%"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.status?a("div",[a("el-tag",{attrs:{type:""}},[e._v("正常")])],1):e._e(),e._v(" "),"1"==t.row.status?a("div",[a("el-tag",{attrs:{type:"danger",effect:"dark"}},[e._v("异常")])],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",sortable:"",align:"center","min-width":"14%"}})],1),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":e.pagesizes,"page-size":e.pagesize,layout:" prev, pager, next, jumper, sizes,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm(e.muticalSelectData)}}},[e._v("保存")])],1)])],1)},staticRenderFns:[]};var o=a("VU/8")(r,l,!1,function(e){a("is5c"),a("U8ZC")},"data-v-5bc3de32",null);t.default=o.exports},"3kjI":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.userContainer[data-v-5bc3de32] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.userContainer .recipientsApply[data-v-5bc3de32] {\n    width: 100%;\n}\n.userContainer .recipientsApply .unitForm[data-v-5bc3de32] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n}\n.userContainer .recipientsApply .unitForm .el-form-item[data-v-5bc3de32] {\n        width: 25%;\n}\n",""])},U8ZC:function(e,t,a){var n=a("3kjI");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("06f8ee76",n,!0)},is5c:function(e,t,a){var n=a("/mUl");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("9f19cc82",n,!0)}});