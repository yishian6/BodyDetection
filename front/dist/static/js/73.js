webpackJsonp([73],{F0y9:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.unitForm[data-v-7dbe9cc9] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  color: #7db4ad;\n}\n.unitForm .el-form-item[data-v-7dbe9cc9] {\n    width: 24%;\n}\n.unitForm .el-form-item .el-form-item__label[data-v-7dbe9cc9] {\n      width: 40%;\n}\n.unitForm .el-form-item .el-form-item__content[data-v-7dbe9cc9] {\n      margin-left: 10px !important;\n}\n.unitForm .el-form-item .el-form-item__content .el-date-editor[data-v-7dbe9cc9] {\n        width: 100%;\n}\n.unitForm .el-form-item .el-form-item__content .el-date-editor .el-input__icon[data-v-7dbe9cc9] {\n          color: #7db4ad;\n}\n.empty[data-v-7dbe9cc9] {\n  text-align: center;\n  color: #00bbee;\n  font-weight: bold;\n  font-size: 19px;\n  margin: 0 auto;\n}\n.empty .experiment[data-v-7dbe9cc9] {\n    width: 85%;\n    height: 350px;\n    margin: 0 auto;\n    background-color: #0623208c;\n    border-radius: 5px;\n}\n.empty .experiment .title[data-v-7dbe9cc9] {\n      padding-top: 2%;\n      line-height: 150%;\n}\n.empty .experiment .charts[data-v-7dbe9cc9] {\n      padding-top: 2%;\n      height: 80%;\n}\n",""])},IT5i:function(t,e,a){var s=a("F0y9");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("rjj0")("19f11688",s,!0)},NpT1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("t4zo"),l={name:"unitManagement",components:{},data:function(){return{form:{site:"广州",month:"12月"},siteOptions:[{value:"广州",label:"广州"},{value:"宁波",label:"宁波"},{value:"上海",label:"上海"}],monthOptions:[{value:"12月",label:"12月"},{value:"10月",label:"10月"},{value:"2月",label:"2月"}],departure:"广东",dest:"广西",extra_describe:"汽车额外去广东的取货成本(元)",timeLable:"12月省销量",loading:!1,tableData:[{method:"粒子群算法优化",sales1:2738,tt:1096,st:1536,cost1:411964,sales2:650,cost2:493318,save_car:0,save_mileage:0,extra_cost:0,save_cost:0,all_cost:905282,icon:!1},{method:"水运累积送2000辆商品车",sales1:2738,tt:1096,st:2e3,cost1:427391,sales2:650,cost2:493318,save_car:45,save_mileage:112593,extra_cost:38480,save_cost:202667,all_cost:756522,icon:!0},{method:"水运累积送2292辆商品车",sales1:2738,tt:1096,st:2292,cost1:477543,sales2:650,cost2:493318,save_car:82,save_mileage:196161,extra_cost:78086,save_cost:353089,all_cost:695858,icon:!0}]}},methods:{getData:function(){var t=this;this.$http.post(this.baseurl+"/empty/search",this.form).then(function(e){t.tableData=e.data.data,t.tableData[0].icon=!1,t.tableData[1].icon=!0,t.tableData[2].icon=!0;var a=t.tableData[0].city.split("-");t.departure=a[0],t.dest=a[1],t.extra_describe="汽车额外去"+t.form.site+"的取货成本(元)",t.timeLable=t.form.month+"省销量"}).catch(function(t){return console.log(t)})},onSearch:function(){var t=this;""==this.form.site&&""==this.form.month?this.$message({message:"优化方法不能为空",type:"error"}):(this.loading=!0,this.getData(),setTimeout(function(){t.loading=!1,t.$message.success("优化成功"),t.initCharts()},800))},downloadExcel:function(){var t=this;if(""==this.form.site&&""==this.form.month)this.$message({message:"优化方法不能为空",type:"error"});else{var e=this.form.month+this.form.site+"空车优化结果.xlsx";this.$http({url:this.baseurl+"/empty/download",method:"POST",responseType:"blob",data:{site:this.form.site,month:this.form.month}}).then(function(a){if(a.data.size>40){var l=new Blob([a.data]);Object(s.saveAs)(l,e),t.$message({message:"文件下载成功！！！",type:"success"})}else t.$message({message:"文件下载失败！！！",type:"error"})}).catch(function(e){t.$message({message:"文件下载失败！！！",type:"error"}),console.error("下载excel文件出错:",e)})}},initCharts:function(){var t={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:[this.departure+"辐射成本",this.dest+"辐射成本",this.departure+"取货成本","分销节约物流成本","两省总物流成本"],textStyle:{color:"rgb(125, 180, 173)"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"value",splitLine:{show:!0,lineStyle:{type:"dashed",color:"RGBA(3, 75, 97, 1)"}},axisLabel:{color:"rgb(125, 180, 173)"}}],yAxis:[{type:"category",axisTick:{show:!1},axisLabel:{color:"rgb(125, 180, 173)"},data:[this.tableData[2].method,this.tableData[1].method,this.tableData[0].method]}],series:[{name:this.departure+"辐射成本",type:"bar",label:{show:!0,position:"inside",color:"rgb(125, 180, 173)"},emphasis:{focus:"series"},data:[this.tableData[2].cost1,this.tableData[1].cost1,this.tableData[0].cost1]},{name:this.dest+"辐射成本",type:"bar",stack:"Total",label:{show:!0,color:"#0623208c"},emphasis:{focus:"series"},data:[this.tableData[2].cost2,this.tableData[1].cost2,this.tableData[0].cost2]},{name:this.departure+"取货成本",type:"bar",label:{show:!0,color:"#0623208c"},emphasis:{focus:"series"},data:[this.tableData[2].extra_cost,this.tableData[1].extra_cost,this.tableData[0].extra_cost]},{name:"分销节约物流成本",type:"bar",label:{show:!0,position:"left",color:"rgb(125, 180, 173)"},emphasis:{focus:"series"},data:[-this.tableData[2].save_cost,-this.tableData[1].save_cost,-this.tableData[0].save_cost]},{name:"两省总物流成本",type:"bar",label:{show:!0,color:"#0623208c"},emphasis:{focus:"series"},data:[this.tableData[2].all_cost,this.tableData[1].all_cost,this.tableData[0].all_cost]}]},e=this.$echarts.init(this.$refs.emptycharts);e.setOption(t),window.addEventListener("resize",function(){e.resize()})}},mounted:function(){var t=this;setTimeout(function(){t.initCharts()},100)}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain",attrs:{id:"app"}},[a("div",{ref:"formDiv"},[a("el-form",{ref:"form",staticClass:"unitForm",attrs:{model:t.form,id:"form"}},[a("el-form-item",{attrs:{label:"站点:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.site,callback:function(e){t.$set(t.form,"site",e)},expression:"form.site"}},t._l(t.siteOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"月份:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.month,callback:function(e){t.$set(t.form,"month",e)},expression:"form.month"}},t._l(t.monthOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.onSearch}},[t._v("优化")]),t._v(" "),a("el-button",{staticClass:"iconfont icon-xiazai",attrs:{type:"primary",size:"small"},on:{click:t.downloadExcel}},[t._v("下载")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"正在优化中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"empty"},[a("div",{staticClass:"experiment"},[a("div",{staticClass:"title"},[t._v("空车智能调度表")]),t._v(" "),a("div",{ref:"emptycharts",staticClass:"charts"})]),t._v(" "),a("el-table",{staticStyle:{width:"86%",margin:"0 auto","margin-top":"20px","border-bottom":"1px solid #ebeef5"},attrs:{data:t.tableData,id:"table",stripe:"","header-row-style":{height:"50px"},"row-style":{height:"50px"}}},[a("el-table-column",{attrs:{label:"",align:"center","min-width":"10%"}},[a("el-table-column",{attrs:{prop:"method",label:"调度方法",align:"center","min-width":"10%"}})],1),t._v(" "),a("el-table-column",{attrs:{label:t.departure,align:"center","min-width":"10%"}},[a("el-table-column",{attrs:{prop:"sales1",label:t.timeLable,align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tt",label:"铁路吞吐量",align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"st",label:"水运吞吐量",align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cost1",label:"辐射成本(铁路+水路+公路)",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"red"}},[t._v("\n                                "+t._s(e.row.cost1)+"\n                            ")])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:t.dest,align:"center","min-width":"10%"}},[a("el-table-column",{attrs:{prop:"sales2",label:t.timeLable,align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cost2",label:"辐射成本(公路)",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"red"}},[t._v("\n                                "+t._s(e.row.cost2)+"\n                            ")])]}}])})],1),t._v(" "),a("el-table-column",{attrs:{label:"数据分析",align:"center","min-width":"10%"}},[a("el-table-column",{attrs:{prop:"save_car",label:"节约空车数",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"#13ce66"}},[t._v("\n                                "+t._s(e.row.save_car)+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"save_mileage",label:"节约的空驶里程数(km)",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"#13ce66"}},[t._v("\n                                "+t._s(e.row.save_mileage)+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"extra_cost",label:t.extra_describe,align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"red"}},[t._v("\n                                "+t._s(e.row.extra_cost)+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"save_cost",label:"汽车分销节约物流成本(元)",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"#13ce66"}},[t._v("\n                                "+t._s(e.row.save_cost)+"\n                            ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"all_cost",label:"两省总的物流成本(元)",align:"center","min-width":"12%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600",color:"#13ce66"}},[e.row.icon?a("span",[a("i",{staticClass:"el-icon-bottom"})]):t._e(),t._v("\n                                "+t._s(e.row.all_cost)+"\n                            ")])]}}])})],1)],1)],1)])])},staticRenderFns:[]};var o=a("VU/8")(l,n,!1,function(t){a("IT5i")},"data-v-7dbe9cc9",null);e.default=o.exports}});