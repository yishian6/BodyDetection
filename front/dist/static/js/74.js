webpackJsonp([74],{A2Yi:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.search[data-v-5984594c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n.search .searchCondition[data-v-5984594c] {\n    width: 90%;\n}\n.search .searchCondition .unitForm[data-v-5984594c] {\n      display: -webkit-box;\n      display: -ms-flexbox;\n      display: flex;\n      -webkit-box-pack: left;\n          -ms-flex-pack: left;\n              justify-content: left;\n      -webkit-box-align: center;\n          -ms-flex-align: center;\n              align-items: center;\n      -ms-flex-wrap: wrap;\n          flex-wrap: wrap;\n      color: #7db4ad;\n}\n.search .searchCondition .unitForm .el-form-item[data-v-5984594c] {\n        width: 27%;\n}\n.search .searchCondition .unitForm .el-form-item .el-form-item__label[data-v-5984594c] {\n          width: 40%;\n}\n.search .searchCondition .unitForm .el-form-item .el-form-item__content[data-v-5984594c] {\n          margin-left: 10px !important;\n}\n.search .searchCondition .unitForm .el-form-item .el-form-item__content .el-date-editor[data-v-5984594c] {\n            width: 100%;\n}\n.search .searchCondition .unitForm .el-form-item .el-form-item__content .el-date-editor .el-input__icon[data-v-5984594c] {\n              color: #7db4ad;\n}\n.search .searchBtn[data-v-5984594c] {\n    width: 24%;\n    padding-right: 4%;\n    font-size: 16px;\n}\n.allChart[data-v-5984594c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -ms-flex-wrap: wrap;\n      flex-wrap: wrap;\n  text-align: center;\n  color: #7db4ad;\n  font-size: 19px;\n  width: 92%;\n  height: 310px;\n  margin: 0 auto;\n}\n.allChart .cost[data-v-5984594c] {\n    font-size: 14px;\n    font-weight: 600;\n}\n.allChart .chart1[data-v-5984594c] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    width: 49%;\n    height: 100%;\n    background-color: #0623208c;\n    border-radius: 5px;\n}\n.allChart .chart1 .chartTitle1[data-v-5984594c] {\n      padding-top: 15px;\n      height: 12%;\n}\n.allChart .chart1 .partChart1[data-v-5984594c] {\n      padding-top: 12px;\n      height: 85%;\n}\n.allChart .chart2[data-v-5984594c] {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-orient: vertical;\n    -webkit-box-direction: normal;\n        -ms-flex-direction: column;\n            flex-direction: column;\n    width: 49%;\n    height: 100%;\n    background-color: #0623208c;\n    border-radius: 5px;\n}\n.allChart .chart2 .chartTitle2[data-v-5984594c] {\n      padding-top: 15px;\n      height: 12%;\n}\n.allChart .chart2 .partChart2[data-v-5984594c] {\n      padding-top: 12px;\n      height: 85%;\n}\n.toolbar[data-v-5984594c] {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  padding-bottom: 15px;\n}\n.toolbar .btnGroup[data-v-5984594c] {\n    width: 35%;\n}\n",""])},CXdI:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("fZjL"),i=a.n(n),o=a("Dd8w"),l=a.n(o),s=a("t4zo"),r={components:{},data:function(){return{form:{type:"全年",is_limit:"吞吐量受限",method:"粒子群算法"},allData:[],searchTableData:[],TableHeight:2,title:"",loading:!1,typeOptions:[{value:"全年",label:"全年"},{value:"二月",label:"二月"},{value:"十月",label:"十月"},{value:"十二月",label:"十二月"}],limitOptions:[{value:"吞吐量受限",label:"吞吐量受限"},{value:"吞吐量不限",label:"吞吐量不限"}],methodOptions:[{value:"粒子群算法",label:"粒子群算法"},{value:"模拟退火算法",label:"退火算法"},{value:"遗传算法",label:"遗传算法"}],labelList:["历史销量(年)","对应省销量(年)","吞吐量(年)","优化吞吐量(年)"],allCost:0,allOptCost:0,maxNum1:1,maxNum2:1}},computed:{},watch:{},methods:{getData:function(){var t=this,e=l()({},this.form);this.$http.post(this.baseurl+"/transport/cost",e).then(function(e){t.allData=e.data.data;var a=[];t.allData.all_data.forEach(function(t){var e=l()({},t);e.cCompare=e.o_cost-e.cost,e.tCompare=e.o_throughput-e.throughput,a.push(e)}),t.searchTableData=a,t.allCost=t.searchTableData[t.searchTableData.length-1].cost,t.allOptCost=t.searchTableData[t.searchTableData.length-1].o_cost,"全年"!=t.form.type?t.labelList.forEach(function(e,a){t.labelList[a]=e.replace("(年)","(月)")}):t.labelList[0].includes("(月)")&&t.labelList.forEach(function(e,a){t.labelList[a]=e.replace("(月)","(年)")})}).catch(function(t){return console.log(t)})},onSearch:function(){var t=this;""==this.form.type?this.$message({message:"时间不能为空",type:"error"}):(this.maxNum1="全年"==this.form.type?1:10,this.maxNum2="全年"==this.form.type?1:10,this.loading=!0,this.getData(),setTimeout(function(){t.initCharts1(),t.initCharts2(),t.loading=!1,t.$message.success("优化成功")},1e3))},downloadExcel:function(){var t=this;if(""==this.form.type&&""==this.form.is_limit&&""==this.form.method)this.$message({message:"优化方法不能为空",type:"error"});else{var e=this.form.type+"品牌车运输成本"+this.form.method+"优化结果.xlsx";this.$http({url:this.baseurl+"/transport/cost/download",method:"POST",responseType:"blob",data:{type:this.form.type,is_limit:this.form.is_limit,method:this.form.method}}).then(function(a){if(a.data.size>40){var n=new Blob([a.data]);Object(s.saveAs)(n,e),t.$message({message:"文件下载成功！！！",type:"success"})}else t.$message({message:"文件下载失败！！！",type:"error"})}).catch(function(e){t.$message({message:"文件下载失败！！！",type:"error"}),console.error("下载excel文件出错:",e)})}},tableRes:function(t,e,a){var n=t;return e.filter(function(t){return i()(t).some(function(e){return a?-1==a.indexOf(e)?String(t[e]).toLowerCase().indexOf(n)>-1:void 0:String(t[e]).toLowerCase().indexOf(n)>-1})})},initCharts1:function(){var t={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["辐射成本","吞吐量"],textStyle:{color:"rgb(125, 180, 173)"}},xAxis:[{type:"category",data:this.allData.site,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"辐射成本",min:0,max:1200/this.maxNum1,interval:200/this.maxNum1,axisLabel:{fontSize:9,formatter:"{value} 万元"}},{type:"value",name:"吞吐量",min:0,max:18e3/this.maxNum2,interval:3e3/this.maxNum2,axisLabel:{fontSize:9,formatter:"{value} 辆"}}],series:[{name:"辐射成本",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:this.allData.cost},{name:"吞吐量",type:"line",yAxisIndex:1,tooltip:{valueFormatter:function(t){return t+" 辆"}},data:this.allData.throughput}]},e=this.$echarts.init(this.$refs.partChart1);e.setOption(t),window.addEventListener("resize",function(){e.resize()})},initCharts2:function(){var t={tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:["辐射成本","吞吐量"],textStyle:{color:"rgb(125, 180, 173)"}},xAxis:[{type:"category",data:this.allData.site,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"辐射成本",min:0,max:1200/this.maxNum1,interval:200/this.maxNum1,axisLabel:{fontSize:9,formatter:"{value} 万元"}},{type:"value",name:"吞吐量",min:0,max:18e3/this.maxNum2,interval:3e3/this.maxNum2,axisLabel:{fontSize:9,formatter:"{value} 辆"}}],series:[{name:"辐射成本",type:"bar",tooltip:{valueFormatter:function(t){return t+" 元"}},data:this.allData.o_cost},{name:"吞吐量",type:"line",yAxisIndex:1,tooltip:{valueFormatter:function(t){return t+" 辆"}},data:this.allData.o_throughput}]},e=this.$echarts.init(this.$refs.partChart2);e.setOption(t),window.addEventListener("resize",function(){e.resize()})}},created:function(){},mounted:function(){var t=this;this.getData();var e=document.documentElement.clientHeight||document.bodyclientHeight;this.$nextTick(function(){t.TableHeight=e-t.$refs.formDiv.offsetHeight-175}),setTimeout(function(){t.initCharts1(),t.initCharts2()},800)},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain",attrs:{id:"app"}},[a("div",{ref:"formDiv",staticClass:"search"},[a("div",{staticClass:"searchCondition"},[a("el-form",{ref:"form",staticClass:"unitForm",attrs:{model:t.form,id:"form"}},[a("el-form-item",{attrs:{label:"查询时间:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.typeOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"运输方式:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.is_limit,callback:function(e){t.$set(t.form,"is_limit",e)},expression:"form.is_limit"}},t._l(t.limitOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"优化方式:"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.form.method,callback:function(e){t.$set(t.form,"method",e)},expression:"form.method"}},t._l(t.methodOptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"searchBtn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"small"},on:{click:t.onSearch}},[t._v("优化")]),t._v(" "),a("el-button",{staticClass:"iconfont icon-xiazai",attrs:{type:"primary",size:"small"},on:{click:t.downloadExcel}},[t._v("下载")])],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"正在查询中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[a("div",{staticClass:"allChart"},[a("div",{staticClass:"chart1"},[a("div",{staticClass:"chartTitle1"},[t._v("整车运输成本"),a("span",{staticClass:"cost"},[t._v("("+t._s(t.allCost)+"元)")])]),t._v(" "),a("div",{ref:"partChart1",staticClass:"partChart1"})]),t._v(" "),a("div",{staticClass:"chart2"},[a("div",{staticClass:"chartTitle2"},[t._v("整车运输成本优化"),a("span",{staticClass:"cost"},[t._v("("+t._s(t.allOptCost)+"元)")])]),t._v(" "),a("div",{ref:"partChart2",staticClass:"partChart2"})])]),t._v(" "),a("el-table",{staticStyle:{width:"86%",margin:"0 auto","margin-top":"20px"},attrs:{data:t.searchTableData,id:"table",stripe:"","header-row-style":{height:"50px"},"row-style":{height:"50px"}}},[a("el-table-column",{attrs:{prop:"site",label:"站点",align:"center","min-width":"8%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"history_sales",label:this.labelList[0],align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"pro_sales",label:this.labelList[1],align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"throughput",label:this.labelList[2],align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cost",label:"辐射成本(元)",align:"center","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"o_throughput",label:this.labelList[3],align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600"},style:e.row.tCompare<=0?{color:"#13ce66"}:{color:"red"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:"总和"!=e.row.site,expression:"scope.row.site != '总和'"}],class:e.row.tCompare<=0?"el-icon-bottom":"el-icon-top"}),t._v("\n\t\t\t\t\t\t"+t._s(e.row.o_throughput)+"\n\t\t\t\t\t")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"o_cost",label:"优化辐射成本(元)",align:"center","min-width":"10%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{"font-weight":"600"},style:e.row.cCompare<0?{color:"#13ce66"}:{color:"red"}},[a("i",{class:e.row.cCompare<0?"el-icon-bottom":"el-icon-top"}),t._v("\n\t\t\t\t\t\t"+t._s(e.row.o_cost)+"\n\t\t\t\t\t")])]}}])})],1)],1)])},staticRenderFns:[]};var m=a("VU/8")(r,c,!1,function(t){a("Zj+M")},"data-v-5984594c",null);e.default=m.exports},"Zj+M":function(t,e,a){var n=a("A2Yi");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("01a3b62e",n,!0)}});