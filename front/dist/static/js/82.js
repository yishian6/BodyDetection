webpackJsonp([82],{"/qhG":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"fileConvert",data:function(){return{progress:0,fileList:[],selectedFormat:"",percentage:0}},methods:{formatFileSize:function(t){for(var e=["B","KB","MB","GB","TB","PB"],n=0;t>=1024&&n<e.length-1;)t/=1024,n++;return""+t.toFixed(2)+e[n]},beforeUpload:function(t){var e="csv"===t.name.split(".")[1],n="json"===t.name.split(".")[1],i="xlsx"===t.name.split(".")[1];return e||n||i?!this.fileList.some(function(e){return e.name===t.name})||(this.$message.error("该文件已上传"),!1):(this.$message.error("只能上传csv、json、xlsx文件"),!1)},handleChange:function(t,e){this.fileList.push(t),this.progress=1},deleteFile:function(t){this.fileList.splice(this.fileList.indexOf(t),1),this.$message.success("文件删除成功"),0==this.fileList.length&&(this.progress=0,this.percentage=0)},convertFile:function(){var t=this;if(0!==this.fileList.length)if(this.selectedFormat&&this.fileList[0].name.split(".")[1]!==this.selectedFormat){var e=new FormData;this.fileList.forEach(function(t){e.append("file",t.raw)}),e.append("targetFormat",this.selectedFormat),console.log(e),this.$http.post(this.baseurl+"/convert",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){200===e.data.code?(t.$message.success("上传并转换成功！"),t.fileList[0].name=e.data.data,t.progress=2,setTimeout(function(){t.startProgress()},500)):t.$message.error("上传并转换失败！")}).catch(function(e){t.$message.error("上传并转换失败！")})}else this.$message.error("请选择转换格式！");else this.$message.error("请先选择文件！")},startProgress:function(){var t=this;this.percentage=0,this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(function(){t.percentage<100?(t.percentage+=Math.floor(10*Math.random())+1,t.percentage>=100&&(t.percentage=100)):clearInterval(t.intervalId)},100)},downloadFile:function(t){var e=this;this.percentage<100?this.$message.error("文件转换中，请稍后再试"):this.$http.get(this.baseurl+"/download?filename="+encodeURIComponent(t.name),{responseType:"blob"}).then(function(n){if(200!==n.status)throw new Error("文件下载失败");var i=window.URL.createObjectURL(new Blob([n.data])),a=document.createElement("a");a.href=i,a.download=t.name,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i),e.$message.success("文件下载成功")}).catch(function(t){console.error("下载失败:",t)})},downloadAllFile:function(){this.downloadFile(this.fileList[0]),this.progress=0,this.fileList=[],this.percentage=0},deleteAllFile:function(){this.fileList=[],this.progress=0,this.percentage=0,this.$message.success("全部文件删除成功")},back:function(){this.progress=0,this.percentage=0,this.fileList=[]}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"update"},[n("div",{staticClass:"title"},[t._v("文件转换器")]),t._v(" "),n("div",{staticClass:"subtitle"},[t._v("轻松在线将文件从一种格式转换为另一种格式。")]),t._v(" "),n("div",{staticClass:"content"},[0==t.progress?n("div",{staticClass:"upload-demo"},[n("el-upload",{staticStyle:{"text-align":"center"},attrs:{drag:"",action:t.baseurl+"/convert",multiple:"",accept:".xlsx, .csv, .json","file-list":t.fileList,"show-file-list":!1,"auto-upload":!1,"on-change":t.handleChange}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),n("em",[t._v("点击上传")])]),t._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传excel/csv/json文件")])])],1):1==t.progress?n("div",{staticClass:"choose"},[n("div",{staticClass:"showfile"},[t._l(t.fileList,function(e){return n("div",{key:e.name,staticClass:"fileList"},[n("div",{staticClass:"file"},[n("div",{staticClass:"file-info"},[n("div",{staticStyle:{"font-size":"18px","margin-bottom":"10%"}},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticStyle:{color:"#7987a1",size:"14px"}},[t._v(t._s(t.formatFileSize(e.size)))])]),t._v(" "),n("div",[t._v("输出: \n                                "),n("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.selectedFormat,callback:function(e){t.selectedFormat=e},expression:"selectedFormat"}},[n("el-option",{attrs:{label:"xlsx",value:"xlsx"}}),t._v(" "),n("el-option",{attrs:{label:"csv",value:"csv"}}),t._v(" "),n("el-option",{attrs:{label:"json",value:"json"}})],1),t._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){t.deleteFile(e)}}},[t._v("删除")])],1)])])}),t._v(" "),n("div",{staticClass:"start"},[n("div",[t._v("共"+t._s(t.fileList.length)+"个文件")]),t._v(" "),n("div",{staticClass:"btn",on:{click:function(e){t.convertFile()}}},[t._v("转换"),n("i",{staticClass:"el-icon-right"})])])],2)]):2==t.progress?n("div",{staticClass:"download"},[n("div",{staticClass:"showfile"},[t._l(t.fileList,function(e){return n("div",{key:e.name,staticClass:"fileList"},[n("div",{staticClass:"file"},[n("div",{staticClass:"file-info"},[n("div",{staticStyle:{"font-size":"18px","margin-bottom":"10%"}},[t._v(t._s(e.name.split("-")[5])+"\n                                ")]),t._v(" "),n("div",{staticStyle:{color:"#7987a1",size:"14px"}},[t._v(t._s(t.formatFileSize(e.size)))])]),t._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("el-progress",{staticStyle:{width:"140px","margin-right":"20px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:t.percentage,status:"success"}}),t._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-"},on:{click:function(n){t.downloadFile(e)}}},[t._v("下载")]),t._v(" "),n("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"4%",cursor:"pointer"},on:{click:function(n){t.deleteFile(e)}}})],1)])])}),t._v(" "),n("div",{staticClass:"start"},[n("div",[t._v("共"+t._s(t.fileList.length)+"个文件")]),t._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"right",width:"40%",height:"100%"}},[n("div",{staticClass:"downloadBtn",on:{click:function(e){t.downloadFile(t.fileList[0])}}},[n("i",{staticClass:"el-icon-download"}),t._v("下载全部\n                            ")]),t._v(" "),n("div",{staticClass:"delBtn",on:{click:t.deleteAllFile}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除全部",placement:"top"}},[n("i",{staticClass:"el-icon-delete"})])],1)])])],2)]):t._e()])])])},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(t){n("yzMD")},"data-v-5f0cc83b",null);e.default=s.exports},tO4D:function(t,e,n){(t.exports=n("FZ+f")(!1)).push([t.i,'\n@charset "UTF-8";\n.app[data-v-5f0cc83b] {\n  color: #000000;\n}\n.app .update[data-v-5f0cc83b] {\n    background-color: #fff;\n    border-radius: 8px;\n    width: 96%;\n    padding: 45px 0px;\n    margin: 0 auto;\n}\n.app .update .title[data-v-5f0cc83b] {\n      font-size: 32px;\n      text-align: center;\n      font-weight: bold;\n      color: #333;\n      margin-bottom: 20px;\n}\n.app .update .subtitle[data-v-5f0cc83b] {\n      font-size: 16px;\n      text-align: center;\n      color: #666;\n      margin-bottom: 30px;\n}\n.app .update .content[data-v-5f0cc83b] {\n      width: 80%;\n      min-height: 400px;\n      margin: 0 auto;\n      border-radius: 10px;\n      padding: 20px;\n      background-color: #eff5ed;\n      border: 1px dashed #ccc;\n      -webkit-box-shadow: 0 3px 24px rgba(0, 0, 0, 0.08);\n              box-shadow: 0 3px 24px rgba(0, 0, 0, 0.08);\n}\n.app .update .content .upload-demo[data-v-5f0cc83b] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        height: 100%;\n        margin-top: 8%;\n}\n.app .update .content .choose[data-v-5f0cc83b] {\n        margin: 10% auto;\n        width: 82%;\n}\n.app .update .content .choose .showfile[data-v-5f0cc83b] {\n          border: 1px dashed #ccc;\n          background-color: #fff;\n          border-radius: 8px;\n          padding: 6px;\n}\n.app .update .content .choose .showfile .fileList[data-v-5f0cc83b] {\n            margin-bottom: 5px;\n}\n.app .update .content .choose .showfile .fileList .file[data-v-5f0cc83b] {\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: justify;\n                  -ms-flex-pack: justify;\n                      justify-content: space-between;\n              border: 1px solid #ccc;\n              padding: 10px;\n              border-radius: 8px;\n}\n.app .update .content .choose .showfile .fileList .file .file-info[data-v-5f0cc83b] {\n                display: -webkit-box;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                    -ms-flex-direction: column;\n                        flex-direction: column;\n}\n.app .update .content .choose .showfile .fileList .file[data-v-5f0cc83b]:hover {\n              background-color: #f5f5f5;\n              border: 1px solid #2ab9ab;\n}\n.app .update .content .choose .showfile .start[data-v-5f0cc83b] {\n            background-color: #e8ebf1;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n                    justify-content: space-between;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            height: 60px;\n            padding-left: 1%;\n}\n.app .update .content .choose .showfile .start .btn[data-v-5f0cc83b] {\n              width: 25%;\n              background-color: #727cf5;\n              height: 100%;\n              color: #fff;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n              /* 增加过渡时间并设置为线性 */\n}\n.app .update .content .choose .showfile .start .btn[data-v-5f0cc83b]:hover {\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n              /* 鼠标悬停在按钮上时，按钮放大1.1倍 */\n              background-color: #656ee0;\n}\n.app .update .content .choose .showfile .start .btn:hover .el-icon-right[data-v-5f0cc83b] {\n              -webkit-transform: translateX(10px);\n                      transform: translateX(10px);\n              /* 鼠标悬停在按钮上时，箭头向右移动10px */\n}\n.app .update .content .download[data-v-5f0cc83b] {\n        margin: 10% auto;\n        width: 82%;\n}\n.app .update .content .download .showfile[data-v-5f0cc83b] {\n          border: 1px dashed #ccc;\n          background-color: #fff;\n          border-radius: 8px;\n          padding: 6px;\n}\n.app .update .content .download .showfile .fileList[data-v-5f0cc83b] {\n            margin-bottom: 5px;\n}\n.app .update .content .download .showfile .fileList .file[data-v-5f0cc83b] {\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: justify;\n                  -ms-flex-pack: justify;\n                      justify-content: space-between;\n              border: 1px solid #ccc;\n              padding: 10px;\n              border-radius: 8px;\n}\n.app .update .content .download .showfile .fileList .file .file-info[data-v-5f0cc83b] {\n                display: -webkit-box;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                    -ms-flex-direction: column;\n                        flex-direction: column;\n                margin-left: 1%;\n}\n.app .update .content .download .showfile .fileList .file[data-v-5f0cc83b]:hover {\n              background-color: #f5f5f5;\n              border: 1px solid #2ab9ab;\n}\n.app .update .content .download .showfile .start[data-v-5f0cc83b] {\n            background-color: #e8ebf1;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n                    justify-content: space-between;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            height: 60px;\n            padding-left: 1%;\n}\n.app .update .content .download .showfile .start .downloadBtn[data-v-5f0cc83b] {\n              width: 65%;\n              background-color: #727cf5;\n              height: 100%;\n              color: #fff;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n              /* 增加过渡时间并设置为线性 */\n}\n.app .update .content .download .showfile .start .downloadBtn[data-v-5f0cc83b]:hover {\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n              /* 鼠标悬停在按钮上时，按钮放大1.1倍 */\n              background-color: #656ee0;\n}\n.app .update .content .download .showfile .start .downloadBtn:hover .el-icon-right[data-v-5f0cc83b] {\n              -webkit-transform: translateX(10px);\n                      transform: translateX(10px);\n              /* 鼠标悬停在按钮上时，箭头向右移动10px */\n}\n.app .update .content .download .showfile .start .delBtn[data-v-5f0cc83b] {\n              width: 15%;\n              background-color: #e8ebf1;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n}\n.app .update .content .download .showfile .start .delBtn[data-v-5f0cc83b]:hover {\n              color: red;\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n}\n',""])},yzMD:function(t,e,n){var i=n("tO4D");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("rjj0")("b9689c08",i,!0)}});