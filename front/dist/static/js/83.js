webpackJsonp([83],{NkPt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"fileConvert",data:function(){return{progress:0,fileList:[],selectedFormat:"",percentage:0}},methods:{formatFileSize:function(e){for(var t=["B","KB","MB","GB","TB","PB"],n=0;e>=1024&&n<t.length-1;)e/=1024,n++;return""+e.toFixed(2)+t[n]},beforeUpload:function(e){var t="csv"===e.name.split(".")[1],n="json"===e.name.split(".")[1],a="xlsx"===e.name.split(".")[1];return t||n||a?!this.fileList.some(function(t){return t.name===e.name})||(this.$message.error("该文件已上传"),!1):(this.$message.error("只能上传csv、json、xlsx文件"),!1)},handleChange:function(e,t){this.fileList.some(function(t){return t.name===e.name})||(this.fileList.push(e),this.progress=1)},deleteFile:function(e){this.fileList.splice(this.fileList.indexOf(e),1),this.$message.success("文件删除成功"),0==this.fileList.length&&(this.progress=0,this.percentage=0)},convertFile:function(){var e=this;if(0!==this.fileList.length)if(this.selectedFormat&&this.fileList[0].name.split(".")[1]!==this.selectedFormat){var t=new FormData;this.fileList.forEach(function(e){t.append("files",e.raw)}),t.append("targetFormat",this.selectedFormat),this.$http.post(this.baseurl+"/convertFiles",t,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(200===t.data.code){e.$message.success("上传并转换成功！");for(var n=0;n<t.data.data.length;n++)e.fileList[n].name=t.data.data[n];e.progress=2,setTimeout(function(){e.startProgress()},500)}else e.$message.error("上传并转换失败！")}).catch(function(t){e.$message.error("上传并转换失败！")})}else this.$message.error("请选择转换格式！");else this.$message.error("请先选择文件！")},startProgress:function(){var e=this;this.percentage=0,this.intervalId&&clearInterval(this.intervalId),this.intervalId=setInterval(function(){e.percentage<100?(e.percentage+=Math.floor(10*Math.random())+1,e.percentage>=100&&(e.percentage=100)):clearInterval(e.intervalId)},100)},downloadFile:function(e,t){var n=this;this.percentage<100?this.$message.error("文件转换中，请稍后再试"):this.$http.get(this.baseurl+"/download?filename="+encodeURIComponent(e.name),{responseType:"blob"}).then(function(a){if(200!==a.status)throw n.$message.error("文件下载失败"),new Error("文件下载失败");var i=window.URL.createObjectURL(new Blob([a.data])),s=document.createElement("a");s.href=i,s.download=e.name,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(i),t||n.$message.success("文件下载成功")}).catch(function(e){console.error("下载失败:",e)})},downloadAllFile:function(){for(var e=0;e<this.fileList.length;e++)this.downloadFile(this.fileList[e],!0);this.$message.success("全部文件下载成功")},deleteAllFile:function(){this.fileList=[],this.progress=0,this.percentage=0,this.$message.success("全部文件删除成功")}}},i={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("div",{staticClass:"update"},[n("div",{staticClass:"title"},[e._v("文件转换器")]),e._v(" "),n("div",{staticClass:"subtitle"},[e._v("轻松在线将文件从一种格式转换为另一种格式。")]),e._v(" "),n("div",{staticClass:"content"},[0==e.progress?n("div",{staticClass:"upload-demo"},[n("el-upload",{staticStyle:{"text-align":"center"},attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/",multiple:"","file-list":e.fileList,"show-file-list":!1,"on-change":e.handleChange}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel/csv/json文件，支持批量转换")])])],1):1==e.progress?n("div",{staticClass:"choose"},[n("div",{staticClass:"addfile"},[n("el-upload",{attrs:{action:e.baseurl+"/convertFiles",multiple:"","file-list":e.fileList,accept:".xlsx, .csv, .json","show-file-list":!1,"before-upload":e.beforeUpload,"auto-upload":!1,"on-change":e.handleChange}},[n("i",{staticClass:"el-icon-folder-add"}),e._v("  添加更多文件\n                    ")])],1),e._v(" "),n("div",{staticClass:"showfile"},[e._l(e.fileList,function(t){return n("div",{key:t.name,staticClass:"fileList"},[n("div",{staticClass:"file"},[n("div",{staticClass:"file-info"},[n("div",{staticStyle:{"font-size":"18px","margin-bottom":"10%"}},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticStyle:{color:"#7987a1",size:"14px"}},[e._v(e._s(e.formatFileSize(t.size)))])]),e._v(" "),n("div",[e._v("输出: \n                                "),n("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectedFormat,callback:function(t){e.selectedFormat=t},expression:"selectedFormat"}},[n("el-option",{attrs:{label:"xlsx",value:"xlsx"}}),e._v(" "),n("el-option",{attrs:{label:"csv",value:"csv"}}),e._v(" "),n("el-option",{attrs:{label:"json",value:"json"}})],1),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(n){e.deleteFile(t)}}},[e._v("删除")])],1)])])}),e._v(" "),n("div",{staticClass:"start"},[n("div",[e._v("共"+e._s(e.fileList.length)+"个文件")]),e._v(" "),n("div",{staticClass:"btn",on:{click:function(t){e.convertFile()}}},[e._v("转换"),n("i",{staticClass:"el-icon-right"})])])],2)]):2==e.progress?n("div",{staticClass:"download"},[n("div",{staticClass:"showfile"},[e._l(e.fileList,function(t){return n("div",{key:t.name,staticClass:"fileList"},[n("div",{staticClass:"file"},[n("div",{staticClass:"file-info"},[n("div",{staticStyle:{"font-size":"18px","margin-bottom":"10%"}},[e._v(e._s(t.name.split("-")[5]))]),e._v(" "),n("div",{staticStyle:{color:"#7987a1",size:"14px"}},[e._v(e._s(e.formatFileSize(t.size)))])]),e._v(" "),n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("el-progress",{staticStyle:{width:"140px","margin-right":"20px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:e.percentage,status:"success"}}),e._v(" "),n("el-button",{attrs:{type:"success",icon:"el-icon-"},on:{click:function(n){e.downloadFile(t,!1)}}},[e._v("下载")]),e._v(" "),n("i",{staticClass:"el-icon-delete",staticStyle:{"margin-left":"4%",cursor:"pointer"},on:{click:function(n){e.deleteFile(t)}}})],1)])])}),e._v(" "),n("div",{staticClass:"start"},[n("div",[e._v("共"+e._s(e.fileList.length)+"个文件")]),e._v(" "),n("div",{staticStyle:{display:"flex","justify-content":"right",width:"40%",height:"100%"}},[n("div",{staticClass:"downloadBtn",on:{click:function(t){e.downloadAllFile()}}},[n("i",{staticClass:"el-icon-download"}),e._v("下载全部\n                            ")]),e._v(" "),n("div",{staticClass:"delBtn",on:{click:e.deleteAllFile}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除全部",placement:"top"}},[n("i",{staticClass:"el-icon-delete"})])],1)])])],2)]):e._e()])])])},staticRenderFns:[]};var s=n("VU/8")(a,i,!1,function(e){n("WnGE")},"data-v-c8a7ed4e",null);t.default=s.exports},WnGE:function(e,t,n){var a=n("soFz");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("03b0f847",a,!0)},soFz:function(e,t,n){(e.exports=n("FZ+f")(!1)).push([e.i,'\n@charset "UTF-8";\n.app[data-v-c8a7ed4e] {\n  color: #000000;\n}\n.app .update[data-v-c8a7ed4e] {\n    background-color: #fff;\n    border-radius: 8px;\n    width: 96%;\n    padding: 45px 0px;\n    margin: 0 auto;\n}\n.app .update .title[data-v-c8a7ed4e] {\n      font-size: 32px;\n      text-align: center;\n      font-weight: bold;\n      color: #333;\n      margin-bottom: 20px;\n}\n.app .update .subtitle[data-v-c8a7ed4e] {\n      font-size: 16px;\n      text-align: center;\n      color: #666;\n      margin-bottom: 30px;\n}\n.app .update .content[data-v-c8a7ed4e] {\n      width: 80%;\n      min-height: 400px;\n      margin: 0 auto;\n      border-radius: 10px;\n      padding: 20px;\n      background-color: #eff5ed;\n      border: 1px dashed #ccc;\n      -webkit-box-shadow: 0 3px 24px rgba(0, 0, 0, 0.08);\n              box-shadow: 0 3px 24px rgba(0, 0, 0, 0.08);\n}\n.app .update .content .upload-demo[data-v-c8a7ed4e] {\n        display: -webkit-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-box-pack: center;\n            -ms-flex-pack: center;\n                justify-content: center;\n        -webkit-box-align: center;\n            -ms-flex-align: center;\n                align-items: center;\n        height: 100%;\n        margin-top: 8%;\n}\n.app .update .content .choose[data-v-c8a7ed4e] {\n        margin: 3% auto;\n        width: 82%;\n}\n.app .update .content .choose .addfile[data-v-c8a7ed4e] {\n          width: 25%;\n          height: 50px;\n          background-color: #e8ebf1;\n          border-radius: 6px;\n          text-align: center;\n          line-height: 50px;\n          font-size: 17px;\n          color: #727cf5;\n          cursor: pointer;\n}\n.app .update .content .choose .showfile[data-v-c8a7ed4e] {\n          border: 1px dashed #ccc;\n          background-color: #fff;\n          border-radius: 8px;\n          padding: 6px;\n}\n.app .update .content .choose .showfile .fileList[data-v-c8a7ed4e] {\n            margin-bottom: 5px;\n}\n.app .update .content .choose .showfile .fileList .file[data-v-c8a7ed4e] {\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: justify;\n                  -ms-flex-pack: justify;\n                      justify-content: space-between;\n              border: 1px solid #ccc;\n              padding: 10px;\n              border-radius: 8px;\n}\n.app .update .content .choose .showfile .fileList .file .file-info[data-v-c8a7ed4e] {\n                display: -webkit-box;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                    -ms-flex-direction: column;\n                        flex-direction: column;\n}\n.app .update .content .choose .showfile .fileList .file[data-v-c8a7ed4e]:hover {\n              background-color: #f5f5f5;\n              border: 1px solid #2ab9ab;\n}\n.app .update .content .choose .showfile .start[data-v-c8a7ed4e] {\n            background-color: #e8ebf1;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n                    justify-content: space-between;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            height: 60px;\n            padding-left: 1%;\n}\n.app .update .content .choose .showfile .start .btn[data-v-c8a7ed4e] {\n              width: 25%;\n              background-color: #727cf5;\n              height: 100%;\n              color: #fff;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n              /* 增加过渡时间并设置为线性 */\n}\n.app .update .content .choose .showfile .start .btn[data-v-c8a7ed4e]:hover {\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n              /* 鼠标悬停在按钮上时，按钮放大1.1倍 */\n              background-color: #656ee0;\n}\n.app .update .content .choose .showfile .start .btn:hover .el-icon-right[data-v-c8a7ed4e] {\n              -webkit-transform: translateX(10px);\n                      transform: translateX(10px);\n              /* 鼠标悬停在按钮上时，箭头向右移动10px */\n}\n.app .update .content .download[data-v-c8a7ed4e] {\n        margin: 4% auto;\n        width: 82%;\n}\n.app .update .content .download .showfile[data-v-c8a7ed4e] {\n          border: 1px dashed #ccc;\n          background-color: #fff;\n          border-radius: 8px;\n          padding: 6px;\n}\n.app .update .content .download .showfile .fileList[data-v-c8a7ed4e] {\n            margin-bottom: 5px;\n}\n.app .update .content .download .showfile .fileList .file[data-v-c8a7ed4e] {\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: justify;\n                  -ms-flex-pack: justify;\n                      justify-content: space-between;\n              border: 1px solid #ccc;\n              padding: 10px;\n              border-radius: 8px;\n}\n.app .update .content .download .showfile .fileList .file .file-info[data-v-c8a7ed4e] {\n                display: -webkit-box;\n                display: -ms-flexbox;\n                display: flex;\n                -webkit-box-orient: vertical;\n                -webkit-box-direction: normal;\n                    -ms-flex-direction: column;\n                        flex-direction: column;\n                margin-left: 1%;\n}\n.app .update .content .download .showfile .fileList .file[data-v-c8a7ed4e]:hover {\n              background-color: #f5f5f5;\n              border: 1px solid #2ab9ab;\n}\n.app .update .content .download .showfile .start[data-v-c8a7ed4e] {\n            background-color: #e8ebf1;\n            display: -webkit-box;\n            display: -ms-flexbox;\n            display: flex;\n            -webkit-box-pack: justify;\n                -ms-flex-pack: justify;\n                    justify-content: space-between;\n            -webkit-box-align: center;\n                -ms-flex-align: center;\n                    align-items: center;\n            height: 60px;\n            padding-left: 1%;\n}\n.app .update .content .download .showfile .start .downloadBtn[data-v-c8a7ed4e] {\n              width: 65%;\n              background-color: #727cf5;\n              height: 100%;\n              color: #fff;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n              /* 增加过渡时间并设置为线性 */\n}\n.app .update .content .download .showfile .start .downloadBtn[data-v-c8a7ed4e]:hover {\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n              /* 鼠标悬停在按钮上时，按钮放大1.1倍 */\n              background-color: #656ee0;\n}\n.app .update .content .download .showfile .start .downloadBtn:hover .el-icon-right[data-v-c8a7ed4e] {\n              -webkit-transform: translateX(10px);\n                      transform: translateX(10px);\n              /* 鼠标悬停在按钮上时，箭头向右移动10px */\n}\n.app .update .content .download .showfile .start .delBtn[data-v-c8a7ed4e] {\n              width: 15%;\n              background-color: #e8ebf1;\n              display: -webkit-box;\n              display: -ms-flexbox;\n              display: flex;\n              -webkit-box-pack: center;\n                  -ms-flex-pack: center;\n                      justify-content: center;\n              -webkit-box-align: center;\n                  -ms-flex-align: center;\n                      align-items: center;\n              font-size: 20px;\n              cursor: pointer;\n              -webkit-transition: -webkit-transform 1s linear;\n              transition: -webkit-transform 1s linear;\n              transition: transform 1s linear;\n              transition: transform 1s linear, -webkit-transform 1s linear;\n}\n.app .update .content .download .showfile .start .delBtn[data-v-c8a7ed4e]:hover {\n              color: red;\n              -webkit-transform: scale(1.1);\n                      transform: scale(1.1);\n}\n',""])}});